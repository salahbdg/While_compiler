# C3aConverter Documentation

## Overview
The `C3aConverter` class is responsible for converting an Abstract Syntax Tree (AST) into three-address code (3AC), a form of intermediate representation used in compilers. It provides methods for traversing the AST, converting its nodes, and generating the corresponding 3AC. This class also collects warnings about certain scenarios (e.g., empty `CONS` expressions) during conversion.

## Architecture

### Key Components

1. **Temporary and Label Generators**
   - **Temporary Variables:** Generated using the `newTemp()` method and prefixed with `t`.
   - **Labels:** Generated using the `newLabel()` method and prefixed with `L`.

2. **Three-Address Code List**
   - `threeAddressCode`: Stores the generated 3AC instructions as a list of strings.

3. **Warning Collector**
   - `warnningCollector`: Stores warnings about specific issues encountered during conversion.

4. **AST Token Types**
   - Placeholder for AST token types in the `AST` class, typically generated by ANTLR.

### Main Methods

- **`convert(CommonTree ast)`**
  The entry point for converting an AST into 3AC. Traverses the tree and delegates the conversion of specific node types to other methods.

- **`convertRoot(CommonTree root)`**
  Handles the root node, which represents multiple function definitions.

- **`convertFunction(CommonTree functionNode)`**
  Converts a function definition, including input parameters, commands, and output.

- **`convertNode(CommonTree ast)`**
  Processes generic AST nodes and delegates specific node types to their corresponding methods.

- **Command Conversion Methods**
  - `convertCommand`: Converts individual commands (e.g., assignments, `if`, `while`, etc.).
  - `convertAssignment`: Converts assignment commands.
  - `convertIf`: Converts `if` statements, including `else` branches.
  - `convertWhile`: Converts `while` loops.

- **Expression Conversion Methods**
  - `convertExpression`: Converts generic expressions.
  - `convertFunctionCall`: Converts function calls.
  - `convertConsExpression`: Converts `CONS` expressions, generating warnings for empty arguments.
  - `convertComparisonExpression`: Converts comparison expressions (e.g., equality checks).

- **Input and Output Handling**
  - `convertInput`: Converts input parameters of a function.
  - `convertOutput`: Converts output parameters of a function.

## How It Works

### Conversion Process

1. **Initialization**
   - The method `convert(CommonTree ast)` is called with the root of the AST.
   - Resets `threeAddressCode`, `tempCounter`, and `labelCounter`.

2. **AST Traversal**
   - Depending on the node type, calls specific methods to handle the conversion.
   - For example:
     - Root nodes are handled by `convertRoot`.
     - Function nodes are handled by `convertFunction`.
     - Commands and expressions are delegated to `convertCommand` and `convertExpression`, respectively.

3. **Three-Address Code Generation**
   - Each conversion method generates 3AC instructions and appends them to the `threeAddressCode` list.
   - Temporary variables and labels are used to represent intermediate results and control flow.

4. **Warnings**
   - During the conversion, specific issues (e.g., empty `CONS` expressions) are recorded in the `warnningCollector` list.

5. **Output**
   - The resulting 3AC is stored in `threeAddressCode` and can be printed using `printThreeAddressCode()`.
   - Warnings can be retrieved using `getWarnnings()`.

### Example Workflow

#### Input AST:
A simple AST representing a function with input parameters, a command block, and an output parameter.

#### Conversion Steps:
1. **Root Node:**
   - Calls `convertRoot` to process child function nodes.
2. **Function Node:**
   - Calls `convertFunction` to process input, commands, and output.
3. **Commands and Expressions:**
   - Delegates command nodes to `convertCommand`.
   - Delegates expression nodes to `convertExpression`.

#### Generated 3AC:
Example output for a hypothetical function:
```
FUNCTION myFunc:
PARAM x
PARAM y
t0 := x + y
RETURN t0
END FUNCTION myFunc
```

### Tests 
We tested our TAC generator with many while codes, including cons.while, if.while, and for.while

Bases on first tests, we improved our generator to make sure it respects
3 max operands per line.


### Key Design Considerations

- **Reusability:** The modular design allows for easy extension to support additional AST node types.
- **Debugging:**
  - `getChilds`: Prints child nodes for debugging.
  - Warning collection highlights potential issues in the AST.
- **Flexibility:** The use of `CommonTree` and ANTLR-generated token types makes it adaptable to various AST structures.

## Limitations

- **Error Handling:** Throws `UnsupportedOperationException` for unsupported node types, which could be improved with more descriptive error messages.
- **Dependency on AST Structure:** Relies on the specific structure of the AST as defined by ANTLR.

## Future Enhancements

- Improve error messages for unsupported node types.
- Add support for more complex control flow structures (e.g., `for` loops).
- Enhance warning collection to cover additional edge cases.
